# **App Name**: QuizWhiz

## Core Features:

- Question Display: Display question and answer options in a clear, user-friendly format.
- Answer Input: Allow players to input their answers via a simple interface (buttons for multiple choice, text input for numerical).
- Timer Display: Show a timer to indicate the remaining time to answer the question
- Fun Fact Generator: After all questions, generate fun facts related to some of the questions asked in the quiz, using an AI tool.
- Results Display: Display the results of each question and the overall scores in a visually appealing manner.

## Style Guidelines:  

- Dark theme as primary, for better readability during long playing sessions.
- Use a blue (#42a5f5) or green (#66bb6a) as the accent color.
- Clean and modern layout with clear separation of elements.
- Subtle animations for transitions and feedback (e.g., correct answer highlight).
- Use clear and consistent icons for different actions and categories.

## Original User Request:
### **Подробный промпт для создания Fullstack приложения (веб + бэкенд) для командной игры в стиле "Кто хочет стать миллионером"**  

#### **Общее описание**  
Необходимо разработать веб-приложение с бэкендом для проведения командной викторины. Игра включает:  
- **Режим администратора** (создание сессий, управление вопросами, мониторинг игроков).  
- **Режим игрока** (подключение к игре, ответы на вопросы, отслеживание результатов).  
- **Два типа вопросов**:  
  - **Классические** (варианты ответов, как в "Кто хочет стать миллионером").  
  - **Числовые** (игроки вводят число, побеждает ближайший к правильному ответу).  
- **Систему подсчета очков и рейтинга**.  
- **Интуитивно понятный интерфейс** с анимациями и визуальными подсказками.  

---

## **1. Технические требования**  
### **Бэкенд (Next.js API routes)**  
- **API для двух ролей**: `admin` и `player`.  
- **База данных** (Supabase/PostgreSQL) для хранения:  
  - Сессий игр (`GameSession`).  
  - Вопросов (`Question`) и их групп (`QuestionGroup`).  
  - Игроков (`Player`) и их ответов (`Answer`).  
- **WebSocket (Если нужно)** для реального взаимодействия между игроками и админом.  

### **Фронтенд (React/Vue.js + TypeScript)**  
- **Адаптивный UI** (под десктоп и мобильные устройства).  
- **Два режима входа**:  
  - `/admin` → control panel.  
  - `/player` → подключение к игре.  
- **Анимации переходов** (например, при смене вопроса, подсчете очков).  

---

## **2. Функционал администратора**  
### **2.1. Управление вопросами**  
- **Создание вопроса**:  
  - Текст вопроса.  
  - Тип (`классический` / `числовой`).  
  - Для классического: варианты ответов (1 правильный).  
  - Для числового: точный правильный ответ (число).  
  - Сложность (1-5 звёзд).  
- **Группировка вопросов**:  
  - Возможность объединять вопросы в группы (`QuestionGroup`).  
  - Пример: "Общие знания", "Наука", "Кино".  

### **2.2. Создание игровой сессии**  
- **Настройки сессии**:  
  - Название (`GameSession`).  
  - Пароль для входа.  
  - Макс. количество игроков.  
  - Выбор группы вопросов.  
  - Время на ответ (по умолчанию 30 сек).  
- **Запуск/остановка игры**.  
- **Просмотр активных сессий**.  

### **2.3. Управление игрой**  
- **Отображение текущего вопроса** (с таймером).  
- **Просмотр ответов игроков** в реальном времени.  
- **Подсчет очков** (автоматический).  
- **Ручное управление** (пропуск вопроса, завершение игры).  

---

## **3. Функционал игрока**  
### **3.1. Подключение к игре**  
- Ввод никнейма.  
- Выбор сессии из списка (или ввод ID).  
- Ввод пароля (если требуется).  

### **3.2. Игровой процесс**  
- **Классический вопрос**:  
  - 4 варианта ответа (A, B, C, D).  
  - Выбор мышкой / клавишами (1-4).  
- **Числовой вопрос**:  
  - Поле для ввода числа.  
  - Подтверждение ответа.  
- **Таймер** (если время истекло — ответ не засчитывается).  

### **3.3. Отображение результатов**  
- **В статусе сессии `waiting`**: для администратора отображается кнопка `Start`.  
    - При нажатии на кнопку статус сессии меняется на `active`, а администратору и игрокам отображается случайный вопрос, прикрепленный к группе игры.  
- **Для отображения вопроса и ответов используются две зоны**: зона вопроса и зона ответов.  
    - Вопрос любого типа отображается в зоне вопроса.  
- **Для `multiple choice` вопросов**:  
    - Варианты ответов отображаются в зоне ответов в несколько строк, по два варианта на каждой строке.  
    - Варианты ответов представлены в виде кнопок для выбора игроками.  
    - Администратору отображаются варианты ответов без возможности выбора.  
    - Если не все игроки выбрали ответ, кнопка с выбранным вариантом подсвечивается оранжевым.  
    - После выбора ответов всеми игроками (или истечения времени): статус меняется на `pending`, вычисляется правильность ответов.  
        - Правильный ответ подсвечивается зеленым (мигающим 3 секунды).  
        - Неправильный ответ подсвечивается красным, а правильный - мигающим зеленым (3 секунды).  
        - Администратору правильный ответ подсвечивается мигающим зеленым (3 секунды).  
        - Начисляются очки согласно правилам, очки отображаются игроку и добавляются к общему счету в Redis.  
- **Для `numerical` вопросов**:  
    - В зоне ответов для игроков - поле ввода ответа (только цифры) и кнопка подтверждения.  
    - Поле ввода изначально пустое.  
    - Если не все игроки ввели ответ, поле ввода блокируется у тех, кто уже ввел.  
    - После ввода ответов всеми игроками (или истечения времени): статус меняется на `pending`, отображается правильный ответ, вычисляются очки и место игрока.  
    - Администратору отображается правильный ответ в зоне ответов.  
- **В статусе `active`**: для администратора вместо кнопки `Start` отображается кнопка `Game In Progress` (без функциональности).  
- **В статусе `pending`**: для администратора вместо кнопки `Start` отображается кнопка `Next Question`.  
    - При нажатии: статус меняется на `active`, отображается следующий вопрос (не повторяющийся).  
    - Если вопросы закончились: отображается таблица результатов (место, никнейм, очки, сортировка по очкам).  
        - Кнопка `End Game`: удаляет игроков из сессии (удаляет данные из Redis), перенаправляет игроков на `/player`, администратора на `/admin`.

---

## **4. Система подсчета очков**  

**Общее правило:**

> Если игрок отвечает на вопрос после того, как истекло отведенное время, ему начисляется 0 очков.

---



**Вопросы типа `multiple choice` (с одним правильным ответом)**:

1.  **Правильность ответа:** Если ответ неправильный, игрок получает 0 очков. Если ответ правильный, очки начисляются в виде бонуса за скорость.
2.  **Сортировка:** Игроки, ответившие правильно, сортируются по возрастанию времени ответа (от самого быстрого к самому медленному).
3.  **Бонус за скорость:** Для игроков, ответивших правильно, рассчитывается бонус в зависимости от их места в отсортированном списке:

    `бонус = (1 + общее_количество_игроков - номер_места_среди_ответивших_правильно) × 5`
4.  **Итоговые очки:** `итоговые_очки = бонус` (если ответ правильный) или `итоговые_очки = 0` (если ответ неправильный).

**Пример `multiple choice` вопроса с 5 участниками:**

*   Вопрос: "Какого цвета небо?" (варианты: синий, зеленый, красный; правильный ответ: синий)
*   Всего участников: 5


**Вопросы типа `numerical`**:

1.  **Расчет точности:** `точность = (1 - (разница / правильный_ответ)) × 100`
2.  **Сортировка:** Игроки сортируются по убыванию точности, а затем по возрастанию времени ответа (если точность одинаковая).
3.  **Начисление очков:**
    *   Игрок на 1 месте (с наибольшей точностью и наименьшим временем ответа при равной точности): `(1 + общее_количество_участников - 1) × 5`.
    *   Для остальных игроков: `(1 + общее_количество_участников - номер_места_участника) × 5`.

**Пример ответов и времени ответа:**

    | Игрок | Ответ   | Время (сек) |
    | :---- | :------ | :---------- |
    | 1     | синий   | 10          |
    | 2     | зеленый | 5           |
    | 3     | синий   | 15          |
    | 4     | синий   | 8           |
    | 5     | красный | 12          |

**Результат:**
    Игрок 4: 25 очков, Игрок 1: 20 очков, Игрок 3: 15 очков, Игроки 2 и 5: 0 очков.

---
**Пример `numerical` вопроса с 10 участниками:**

*   Вопрос: "Какова температура кипения воды в градусах Цельсия?" (правильный ответ: 100)
*   Всего участников: 10
*   Ответы и время ответа игроков (примерные, для иллюстрации):

    | Игрок | Ответ | Время (сек) |
    | :---- | :---- | :---------- |
    | 1     | 98    | 12          |
    | 2     | 100   | 8           |
    | 3     | 102   | 15          |
    | 4     | 99    | 10          |
    | 5     | 101   | 20          |
    | 6     | 95    | 5           |
    | 7     | 100   | 18          |
    | 8     | 105   | 25          |
    | 9     | 97    | 14          |
    | 10    | 103   | 11          |

**Результат:**

    | Место | Игрок | Очки |
    | :---- | :---- | :--- |
    | 1     | 2     | 50   |
    | 2     | 7     | 45   |
    | 3     | 4     | 40   |
    | 4     | 5     | 35   |
    | 5     | 1     | 30   |
    | 6     | 3     | 25   |
    | 7     | 9     | 20   |
    | 8     | 10    | 15   |
    | 9     | 6     | 10   |
    | 10    | 8     | 5    |

---


## **5. Интерфейс (UI/UX)**  
### **5.1. Общий стиль**  
- **Темная тема** с акцентными цветами (синий/зеленый).  
- **Анимации**:  
  - Появление вопросов (fade-in).  
  - Подсветка правильного ответа.  
  - Уведомления (правильно/неправильно).  

### **5.2. Страница администратора**  
- **Dashboard** с активными сессиями.  
- **Question editor** (удобный CRUD).  
- **Панель запуска игры** (кнопка "Старт", "Следующий вопрос").  

### **5.3. Страница игрока**  
- **Лобби** (никнейм, выбор игры).  
- **Игровой экран**:  
  - Текст вопроса крупным шрифтом.  
  - Варианты ответов в виде кнопок.  
  - Таймер вверху.  
- **Результаты**:  
  - Гистограмма с очками игроков.  
  - Анимация подъема в рейтинге.  

---

## **6. Дополнительные фичи**  
- **Звуковые эффекты** (правильный ответ, таймер).  
- **Поддержка мультиязычности** (i18n).  
- **Экспорт результатов** (CSV/JSON).  

---

### **Итог**  
Приложение должно быть **интерактивным**, **понятным** и **динамичным**, чтобы игроки могли легко подключиться, а администратор — удобно управлять процессом.  

**Пример реализации API и UI можно уточнить?** Если да, я могу предложить схему endpoints или макеты экранов.
  